<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>My Docs</title>
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify/themes/vue.css" />
</head>
<body>
  <div id="app"></div>

  <script src="//cdn.jsdelivr.net/npm/docsify/lib/docsify.min.js"></script>

  <script>
    window.$docsify = {
      name: 'My Docs',
      repo: 'sheik195/docsify',

      plugins: [
        function (hook, vm) {

          hook.afterEach(async function (content, next) {

            const apiURL = `https://api.github.com/repos/sheik195/docsify/commits`;

            try {
              const res = await fetch(apiURL);
              const commits = await res.json();

              let history = "## üìù Commit History\n\n";

              commits.forEach(c => {
                history += `
**Author:** ${c.commit.author.name}  
**Date:** ${new Date(c.commit.author.date).toLocaleString()}  
**Message:** ${c.commit.message}  

---\n`;
              });

              next(history + "\n" + content);

            } catch (e) {
              next("## üìù Commit History\nFailed to load history.\n\n" + content);
            }
          });
        }
      ]
    }
  </script>

</body>
</html>
